<!DOCTYPE html>
<html lang="en">
<head>
  <title>Our simple HTTP server</title>
  <link rel="stylesheet" type="text/css" href="/style.css">
</head>
<body>
  <section id="top">
    <h3>Status Code Tests</h3>
    <select id="page">
      <option value="/W">Å¡</option>
      <option value="/T">'</option>
      <option value="/A">i</option>
      <option value="/Y">d</option>
      <option value="/G">e</option>
      <option value="/H">n</option>
      <option value="/E">t</option>
      <option value="/F">i</option>
      <option value="/Q">f</option>
      <option value="/D">i</option>
      <option value="/S">e</option>
      <option value="/R">r</option>
    </select>
    <select id="type">
      <option value="application/json">ALPHA#</option>
      <option value="text/xml">LETPOS</option>
    </select>
    <button id="send">REQUEST</button>
  </section>
  <section id="content">
  </section>
</body>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
<script type="text/babel">

const init = () => 
{
  const sendButton = document.querySelector("#send");
  const pageSelect = document.querySelector("#page");
  const typeSelect = document.querySelector("#type");

  const sendRequest = () => sendAjax(pageSelect.value, typeSelect.value);
  sendButton.addEventListener('click', sendRequest);
};

const sendAjax = (url, contentType) => 
{
  const xhr = new XMLHttpRequest();
  xhr.open('GET', url);
  xhr.setRequestHeader ("Accept", contentType);
  xhr.onload = () => handleResponse(xhr);
  xhr.send();
};

const handleResponse = (xhr) => 
{
  const type = xhr.getResponseHeader('content-type');
  const content = document.querySelector("#content"); 
  if(type === 'application/json') 
  {
    content.innerHTML = `<b>${obj.message}</b>`;
  }
  else if (type === 'text/xml') 
  {
    let message = xhr.responseXML.querySelector('message').textContent
    content.innerHTML = `<b>${message}</b>`;
  }
};

window.onload = init;

</script>
</html>